<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Manage and analyse experiments: Experiment/Query | thexp</title>
    <meta name="generator" content="VuePress 1.5.3">
    
    <meta name="description" content="Pytorch Framework for Research">
    <link rel="preload" href="/thexp/assets/css/0.styles.cbe7f000.css" as="style"><link rel="preload" href="/thexp/assets/js/app.4ed6bfcd.js" as="script"><link rel="preload" href="/thexp/assets/js/3.74d8f37c.js" as="script"><link rel="preload" href="/thexp/assets/js/24.55394ed2.js" as="script"><link rel="prefetch" href="/thexp/assets/js/10.cbd5d775.js"><link rel="prefetch" href="/thexp/assets/js/11.0c3dcf5c.js"><link rel="prefetch" href="/thexp/assets/js/12.71e963d5.js"><link rel="prefetch" href="/thexp/assets/js/13.d3fb616c.js"><link rel="prefetch" href="/thexp/assets/js/14.83510b18.js"><link rel="prefetch" href="/thexp/assets/js/15.5f1e9c6f.js"><link rel="prefetch" href="/thexp/assets/js/16.26c7422b.js"><link rel="prefetch" href="/thexp/assets/js/17.9ebef0f4.js"><link rel="prefetch" href="/thexp/assets/js/18.629f39e3.js"><link rel="prefetch" href="/thexp/assets/js/19.376ca785.js"><link rel="prefetch" href="/thexp/assets/js/20.7b4a6eed.js"><link rel="prefetch" href="/thexp/assets/js/21.3a10c028.js"><link rel="prefetch" href="/thexp/assets/js/22.308395cf.js"><link rel="prefetch" href="/thexp/assets/js/23.aa5c2f70.js"><link rel="prefetch" href="/thexp/assets/js/25.69bab919.js"><link rel="prefetch" href="/thexp/assets/js/26.3940c965.js"><link rel="prefetch" href="/thexp/assets/js/27.e5b12ecf.js"><link rel="prefetch" href="/thexp/assets/js/28.54bf0760.js"><link rel="prefetch" href="/thexp/assets/js/29.11901763.js"><link rel="prefetch" href="/thexp/assets/js/30.171024b1.js"><link rel="prefetch" href="/thexp/assets/js/31.19a1730a.js"><link rel="prefetch" href="/thexp/assets/js/32.97e3616f.js"><link rel="prefetch" href="/thexp/assets/js/33.144b21a4.js"><link rel="prefetch" href="/thexp/assets/js/34.42369718.js"><link rel="prefetch" href="/thexp/assets/js/35.195344ea.js"><link rel="prefetch" href="/thexp/assets/js/36.0a8a65fa.js"><link rel="prefetch" href="/thexp/assets/js/37.35c1c712.js"><link rel="prefetch" href="/thexp/assets/js/38.85393fda.js"><link rel="prefetch" href="/thexp/assets/js/39.36791a25.js"><link rel="prefetch" href="/thexp/assets/js/4.bfe63e3f.js"><link rel="prefetch" href="/thexp/assets/js/40.38a8eb16.js"><link rel="prefetch" href="/thexp/assets/js/41.2c6e723c.js"><link rel="prefetch" href="/thexp/assets/js/42.414e24c8.js"><link rel="prefetch" href="/thexp/assets/js/5.250cab8d.js"><link rel="prefetch" href="/thexp/assets/js/6.b4a27d37.js"><link rel="prefetch" href="/thexp/assets/js/7.6233ecca.js"><link rel="prefetch" href="/thexp/assets/js/8.2a09747e.js"><link rel="prefetch" href="/thexp/assets/js/9.a5aa0086.js"><link rel="prefetch" href="/thexp/assets/js/vendors~docsearch.33b3cf02.js">
    <link rel="stylesheet" href="/thexp/assets/css/0.styles.cbe7f000.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/thexp/" class="home-link router-link-active"><!----> <span class="site-name">thexp</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/thexp/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/thexp/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/thexp/cookbook/" class="nav-link">
  Cookbook
</a></div><div class="nav-item"><a href="/thexp/about/" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/thexp/exp/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/thexp/zh/exp/" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/sailist/thexp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/thexp/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/thexp/tutorial/" class="nav-link">
  Tutorial
</a></div><div class="nav-item"><a href="/thexp/cookbook/" class="nav-link">
  Cookbook
</a></div><div class="nav-item"><a href="/thexp/about/" class="nav-link">
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Languages" class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/thexp/exp/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  English
</a></li><li class="dropdown-item"><!----> <a href="/thexp/zh/exp/" class="nav-link">
  简体中文
</a></li></ul></div></div> <a href="https://github.com/sailist/thexp" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Tutorial</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/thexp/tutorial/" class="sidebar-link">Introduction</a></li><li><a href="/thexp/params/" class="sidebar-link">Define hyperparameters : Params</a></li><li><a href="/thexp/meter/" class="sidebar-link">Record variable : Meter</a></li><li><a href="/thexp/logger/" class="sidebar-link">Logger</a></li><li><a href="/thexp/saver/" class="sidebar-link">Store model or checkpoint : Saver</a></li><li><a href="/thexp/rnd/" class="sidebar-link">Manage random state : RndManager</a></li><li><a href="/thexp/builder/" class="sidebar-link">Easy shape dataset : DatasetBuilder</a></li><li><a href="/thexp/bundler/" class="sidebar-link">Bundle dataloader : DataBundler</a></li><li><a href="/thexp/exp/" aria-current="page" class="active sidebar-link">Manage and analyse experiments: Experiment/Query</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/thexp/exp/#methods-for-managing-path" class="sidebar-link">Methods for managing path</a></li><li class="sidebar-sub-header"><a href="/thexp/exp/#get-start" class="sidebar-link">Get start</a></li><li class="sidebar-sub-header"><a href="/thexp/exp/#record-experiment-infomation" class="sidebar-link">Record experiment infomation</a></li><li class="sidebar-sub-header"><a href="/thexp/exp/#filter-and-analyse-experiments" class="sidebar-link">Filter and analyse experiments</a></li><li class="sidebar-sub-header"><a href="/thexp/exp/#archive-and-reset" class="sidebar-link">Archive and reset</a></li><li class="sidebar-sub-header"><a href="/thexp/exp/#global-config" class="sidebar-link">Global config</a></li></ul></li><li><a href="/thexp/trainer/" class="sidebar-link">Whole train procedure : Trainer</a></li><li><a href="/thexp/other/" class="sidebar-link">Other</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="manage-and-analyse-experiments-experiment-query"><a href="#manage-and-analyse-experiments-experiment-query" class="header-anchor">#</a> Manage and analyse experiments: Experiment/Query</h1> <p></p><div class="table-of-contents"><ul><li><a href="#methods-for-managing-path">Methods for managing path</a></li><li><a href="#get-start">Get start</a><ul><li><a href="#provide-appropriate-path">Provide appropriate path</a></li><li><a href="#plugin">Plugin</a></li><li><a href="#native-plugins">Native plugins</a></li><li><a href="#git-commit">Git Commit</a></li></ul></li><li><a href="#record-experiment-infomation">Record experiment infomation</a></li><li><a href="#filter-and-analyse-experiments">Filter and analyse experiments</a><ul><li><a href="#aabundant-filter-methods-for-tests">Aabundant filter methods for tests</a></li><li><a href="#filter-by-hypereparams-value">Filter by hypereparams value</a></li><li><a href="#view-infomations">View infomations</a></li><li><a href="#boardquery-visualize">BoardQuery : visualize</a></li></ul></li><li><a href="#archive-and-reset">Archive and reset</a></li><li><a href="#global-config">Global config</a><ul><li><a href="#write">Write</a></li><li><a href="#read">Read</a></li></ul></li></ul></div><p></p> <p>Inspired by <a href="https://github.com/fastnlp/fitlog" target="_blank" rel="noopener noreferrer">fitlog<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <code>thexp</code> provided a serise methods and classes to elegantly manage and analyse your experiments.</p> <p>There are two points:</p> <ul><li>how to define and get a store path of an experiment.</li> <li>how to combine experiments with git.</li></ul> <h2 id="methods-for-managing-path"><a href="#methods-for-managing-path" class="header-anchor">#</a> Methods for managing path</h2> <blockquote><p>This part is just like a theroy or thought, you can skip it and see [Get start](#Get start) directly.</p></blockquote> <p>We now have many definitions: <strong>test</strong>, <strong>experiment</strong>, <strong>project</strong>, <strong>repository</strong>. Before managing path, we have to figure out the relation among them.</p> <p>Under <code>thexp</code>'s understand, a common relation is: We will initialize one or some repository from a project, and design many experiments in every repository, then any expeirment may be evaluated many times, means many <strong>tests</strong>.</p> <p>When we run our program, some experiments may be evaluated many times, but we just need to commit one time at the first(all tests in this running time will based on the same code snapshot.).</p> <p>So, finally, the abstract directory structure is:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{root path}/{project name}.{uuid hash}/{   experiment name   }/{index}.{commit hash}/
----------   -------------------------  ---------------------  --------------------
                   Project-level dir              Exp-level dir          test-level dir
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">uuid hash in project-level dir</p> <p>To avoid duplicate name, <code>thexp</code> will assign unique uuid(two random mix of numbers and letters) to each repository.</p></div> <h2 id="get-start"><a href="#get-start" class="header-anchor">#</a> Get start</h2> <div class="custom-block warning"><p class="custom-block-title">Install Git</p> <p>Git is suggested.</p></div> <p>There are three main functions in <code>Experiment</code>:</p> <ol><li><strong>Provide appropriate path</strong> for each test, so that necessary infomation can be saved and won't be covered.</li> <li><strong>Store all meta-infomation</strong> for each test, so that analysis after test is available.</li> <li><strong>Commit</strong> in each running, so that all tests can be reset and reimplemented.</li></ol> <h3 id="provide-appropriate-path"><a href="#provide-appropriate-path" class="header-anchor">#</a> Provide appropriate path</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> thexp <span class="token keyword">import</span> Experiment

exp <span class="token operator">=</span> Experiment<span class="token punctuation">(</span><span class="token string">&quot;expname&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>exp<span class="token punctuation">.</span>make_exp_dir<span class="token punctuation">(</span><span class="token string">&quot;explevel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># An experiment-level directory, related by expname</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>exp<span class="token punctuation">.</span>makedir<span class="token punctuation">(</span><span class="token string">&quot;testlevel&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># An test-level directory. Each `Experiment` instance have one dirfferent path. </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>output:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{path}\{proj_name}\expname\explevel
{path}\{proj_name}\expname\0003.e09411bc\testlevel
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="plugin"><a href="#plugin" class="header-anchor">#</a> Plugin</h3> <p><code>thexp</code> define a conception of <code>plugin</code>. In a nutshell, a plugin represents some actions that are independent of the core procedure. And, for restoring the actoins, a dict contains some meta-information needs to be stored.</p> <p>For example, log is independent of training procedure, it's only used for us to check the training procedure, so, log is a <code>plugin</code> in experiment, and the plugin needs to store the log file path(if exists) so that we can find it.</p> <p>Plugin can be added by the code below:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>exp <span class="token operator">=</span> Experiment<span class="token punctuation">(</span><span class="token string">'exp_name'</span><span class="token punctuation">)</span>
exp<span class="token punctuation">.</span>add_plugin<span class="token punctuation">(</span><span class="token string">'plugin_name'</span><span class="token punctuation">,</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>a<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>You may find that this two line code have nothing to do in your experiment stage. Indeed it is, but it will help a log in your analysis stage. See <a href="#Query">Query</a> for details.</p></blockquote> <h3 id="native-plugins"><a href="#native-plugins" class="header-anchor">#</a> Native plugins</h3> <p><a href="/thexp/params">Params</a>, <a href="/thexp/logger">Logger</a>, <a href="/thexp/rnd">RndManager</a>, <a href="/thexp/saver">Saver</a>, and <code>SummaryWritter</code> in <code>Tensoboard</code>, can also be seen as a plugin, and <code>Experiment</code> have extra methods to support these plugins.</p> <p>Here is the code example:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> thexp <span class="token keyword">import</span> Params
p <span class="token operator">=</span> Params<span class="token punctuation">(</span><span class="token punctuation">)</span>
exp<span class="token punctuation">.</span>add_params<span class="token punctuation">(</span>p<span class="token punctuation">)</span>


<span class="token keyword">from</span> thexp <span class="token keyword">import</span> Logger
logger <span class="token operator">=</span> Logger<span class="token punctuation">(</span><span class="token punctuation">)</span>
fn <span class="token operator">=</span> logger<span class="token punctuation">.</span>add_log_dir<span class="token punctuation">(</span>self<span class="token punctuation">.</span>experiment<span class="token punctuation">.</span>test_dir<span class="token punctuation">)</span>
exp<span class="token punctuation">.</span>add_logger<span class="token punctuation">(</span>fn<span class="token punctuation">)</span>


<span class="token keyword">from</span> torch<span class="token punctuation">.</span>utils<span class="token punctuation">.</span>tensorboard <span class="token keyword">import</span> SummaryWriter
kwargs <span class="token operator">=</span> exp<span class="token punctuation">.</span>add_board<span class="token punctuation">(</span><span class="token punctuation">)</span>
res <span class="token operator">=</span> SummaryWriter<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>


<span class="token keyword">from</span> thexp <span class="token keyword">import</span> Saver
kwargs <span class="token operator">=</span> self<span class="token punctuation">.</span>experiment<span class="token punctuation">.</span>add_saver<span class="token punctuation">(</span><span class="token punctuation">)</span>
Saver<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>


<span class="token keyword">from</span> thexp <span class="token keyword">import</span> RndManager
kwargs <span class="token operator">=</span> exp<span class="token punctuation">.</span>add_rndmanager<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">return</span> RndManager<span class="token punctuation">(</span><span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="git-commit"><a href="#git-commit" class="header-anchor">#</a> Git Commit</h3> <p>When the first <code>Experiment</code> instance (in this runtime) was created, the repository will be commited by git in branch <code>experiment</code>.</p> <blockquote><p>See <a href="#methods-for-managing-path">managing path</a> for details</p></blockquote> <p>::: If not Git repository
If your project directory is not a Git repository, some command-line hints will show to help you initialize your directory.
:::</p> <div class="custom-block tip"><p class="custom-block-title">Commit branch</p> <p>All commit operation will be executed in <code>experiment</code> branch, and current branch will be changed into original branch after committing.(default is <code>master</code> branch)</p></div> <h2 id="record-experiment-infomation"><a href="#record-experiment-infomation" class="header-anchor">#</a> Record experiment infomation</h2> <p>After some times of tests, the directory tree might have the below form:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>└─...
    ├─expname
    │  ├─0001.f9827e4a
    │  │  │  info.json
    │  │  └─testlevel
    │  ├─0002.e5aba42a
    │  │  │  info.json
    │  │  └─testlevel
    │  ├─0003.e09411bc
    │  │  │  info.json
    │  │  │  Exception
    │  │  └─testlevel
    ...
    │  └─explevel    
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><blockquote><p><code>Experiment</code> will automatic</p></blockquote> <div class="custom-block tip"><p class="custom-block-title">info.json</p> <p>A <code>info.json</code> file will include some infomation about the relevant test.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;repo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;E:\\Python\\thexp-test3&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;argv&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;E:/Python//thexp-test3/ex_trainer.py&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exp_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;V2.__main__&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exp_dir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e:/python/thexp-test3/.thexp/experiments\\thexp-test3.b0\\V2.__main__&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;test_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0001.cbf636c4&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;test_dir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e:/python/thexp-test3/.thexp/experiments\\thexp-test3.b0\\V2.__main__\\0001.cbf636c4&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;root_dir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e:/python/thexp-test3/.thexp/experiments&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;project_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;thexp-test3&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;project_iname&quot;</span><span class="token operator">:</span> <span class="token string">&quot;thexp-test3.b0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;project_dir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e:/python/thexp-test3/.thexp/experiments\\thexp-test3.b0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;commit_hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cbf636c4a9de757dcf9a10714a287cce9c86ece7&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;short_hash&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cbf636c4&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dirs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;board&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;time_fmt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;%Y-%m-%d %H:%M:%S&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;start_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-29 11:21:26&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;plugins&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      ...
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;end_time&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2020-05-29 11:21:37&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;end_code&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div></div> <h2 id="filter-and-analyse-experiments"><a href="#filter-and-analyse-experiments" class="header-anchor">#</a> Filter and analyse experiments</h2> <p><code>thexp.analyse</code> provides many methods to filter and analyse test in different grains.</p> <p>Iterate all tests:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> thexp<span class="token punctuation">.</span>analyser <span class="token keyword">import</span> Q
Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># fetch all repository</span>

Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># fetch all experiments of the selected repository</span>

Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># fetch all tests of the selected experiments</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>All outputs will be formatted as table like <code>pandas</code>, and support html in <code>jupyter</code>：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>   base.xxxxxxxxdExp stable2.xxxxxxExp     Reset      represent.xxxxxxxxExp  \
0     0001.56cead43     0002.1a38fedc   0001.77e607fb      0001.91e47299       
1     0002.0b9f5deb     0001.46076a78            None      0002.5f794c00       
2     0003.dd496b76     0003.09d3a97b            None      0003.73e96156       
3     0004.d0ca9aa5     0004.7eb15554            None      0004.34a7a97a       
4     0005.2d1a856d     0006.5a699058            None      0005.be4a68a5       
5     0006.cba163c8     0007.7875b6d2            None      0006.af573325       
6     0007.90fc2bc0     0008.f809bb64            None      0007.81a9503e       
7     0008.2c5f772c     0005.cbce728f            None               None       
8              None     0010.d9dd56eb            None               None       
9              None     0011.cc29d9ad            None               None       
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Directly fetch all tests/experiments</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> thexp <span class="token keyword">import</span> Q<span class="token punctuation">,</span>C
<span class="token keyword">print</span><span class="token punctuation">(</span>Q<span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># == Q.repos().exps().tests()</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>Q<span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># == Q.repos().exps()</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># == Q.repos().exps().tests()</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Filter all search by slice or name key</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># filter by args, dict key or slice</span>
Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span> 
Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;exp1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;exp2&quot;</span><span class="token punctuation">]</span>
Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token string">&quot;exp1&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;exp2&quot;</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">Union and intersection</p> <p>You can use Query  <code>&amp;</code> and <code>|</code> to get a union or intersection of the query result in same grains.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>Q<span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'exp1'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span> Q<span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'exp2'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div> <h3 id="aabundant-filter-methods-for-tests"><a href="#aabundant-filter-methods-for-tests" class="header-anchor">#</a> Aabundant filter methods for tests</h3> <p>In test-level, there are many methods that can be used to filter or search tests.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>testq<span class="token punctuation">.</span>success<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Find tests that end without any exception. (.failed() for tests end with exceptions.)</span>

<span class="token comment"># Filter by time</span>
testq<span class="token punctuation">.</span>in_time<span class="token punctuation">(</span>hours<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">)</span>  <span class="token comment"># or days,weeks,seconds,minutes</span>
testq<span class="token punctuation">.</span>time_range<span class="token punctuation">(</span>left_time<span class="token operator">=</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>right_time<span class="token operator">=</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token comment">#give datetime object</span>

<span class="token comment"># If have something</span>
<span class="token comment"># testq.has_tag(self, tag: str, toggle=True)</span>
<span class="token comment"># testq.has_plugin(self, plugin, toggle=True)</span>
<span class="token comment"># testq.has_board(self, toggle=True)</span>
<span class="token comment"># testq.has_log(self, toggle=True)</span>
<span class="token comment"># testq.has_modules(self, toggle=True)</span>
<span class="token comment"># testq.has_params(self, toggle=True)</span>
<span class="token comment"># testq.has_trainer(self, toggle=True)</span>
<span class="token comment"># testq.has_dir(self, dir: str, toggle=True)</span>
<span class="token comment"># testq.has_state(self, state_name: str, toggle=True)</span>

testq<span class="token punctuation">.</span>first<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># testq.last()</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="filter-by-hypereparams-value"><a href="#filter-by-hypereparams-value" class="header-anchor">#</a> Filter by hypereparams value</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code>Q<span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>filter_params<span class="token punctuation">(</span>C<span class="token punctuation">.</span>param<span class="token punctuation">.</span>batch_size <span class="token operator">==</span> <span class="token number">128</span><span class="token punctuation">)</span> <span class="token comment"># filter the tests which the value of batch_size is 128</span>
Q<span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>filter_params<span class="token punctuation">(</span>C<span class="token punctuation">.</span>param<span class="token punctuation">.</span>allow_none<span class="token punctuation">.</span>margin <span class="token operator">&gt;</span> <span class="token number">1.2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Filter use multi-conditions</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># will get an union of each filter result.</span>
Q<span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>filter_params<span class="token punctuation">(</span>C<span class="token punctuation">.</span>param<span class="token punctuation">.</span>allow_none<span class="token punctuation">.</span>margin <span class="token operator">&gt;</span> <span class="token number">1.2</span><span class="token punctuation">,</span>
                        C<span class="token punctuation">.</span>param<span class="token punctuation">.</span>batch_size <span class="token operator">==</span> <span class="token number">1.2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>You can also use <code>|</code> to get an intersection of the results.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>testq <span class="token operator">=</span> <span class="token punctuation">(</span>
        Q<span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>filter_params<span class="token punctuation">(</span>C<span class="token punctuation">.</span>param<span class="token punctuation">.</span>allow_none<span class="token punctuation">.</span>margin <span class="token operator">&gt;</span> <span class="token number">1.2</span><span class="token punctuation">,</span> C<span class="token punctuation">.</span>param<span class="token punctuation">.</span>batch_size <span class="token operator">==</span> <span class="token number">1.2</span><span class="token punctuation">)</span> <span class="token operator">|</span>
        Q<span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>filter_params<span class="token punctuation">(</span>C<span class="token punctuation">.</span>param<span class="token punctuation">.</span>lr <span class="token operator">==</span> <span class="token number">0.3</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="view-infomations"><a href="#view-infomations" class="header-anchor">#</a> View infomations</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">print</span><span class="token punctuation">(</span>Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_viewer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exp_dirs<span class="token punctuation">)</span>

<span class="token keyword">for</span> vw <span class="token keyword">in</span> Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_viewers<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>vw<span class="token punctuation">,</span> vw<span class="token punctuation">.</span>proj_dir<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>Q<span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token string">'0020.d94c25ef'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_viewer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>params<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>Most meaning of the infomation are clearly enough, so there is no need to introduce them one by one, please see code for details.</p></blockquote> <h3 id="boardquery-visualize"><a href="#boardquery-visualize" class="header-anchor">#</a> BoardQuery : visualize</h3> <p>As you see in home page, you can directly visualize the values recorded by <code>Tensorboard</code>.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> thexp <span class="token keyword">import</span> Q<span class="token punctuation">,</span> C

testq <span class="token operator">=</span> <span class="token punctuation">(</span>
    Q<span class="token punctuation">.</span>repos<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Fetch all repository</span>
        <span class="token punctuation">.</span>exps<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">'sup'</span><span class="token punctuation">]</span> <span class="token comment"># Fetch all experiments and use ['sup'] to find the experiment named `sup`.</span>
        <span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment"># Fetch all `test` of experiment `sup`</span>
<span class="token punctuation">)</span>
bd <span class="token operator">=</span> <span class="token punctuation">(</span>
    testq<span class="token punctuation">.</span>success<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># Filter all success tests.</span>
        <span class="token punctuation">.</span>boards<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># Create BoardQuery(A tensorboard query for visualize) of these tests.</span>
<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>bd<span class="token punctuation">.</span>scalar_tags<span class="token punctuation">)</span> <span class="token comment"># View tag can be visualized</span>

<span class="token comment"># Plot parallel to compare three values</span>
bd<span class="token punctuation">.</span>parallel<span class="token punctuation">(</span>C<span class="token punctuation">.</span>meter<span class="token punctuation">.</span>top1_test_<span class="token punctuation">,</span>  <span class="token comment"># will automatic use the max of the series values</span>
            C<span class="token punctuation">.</span>param<span class="token punctuation">[</span><span class="token string">&quot;optim.args.lr&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> 
            C<span class="token punctuation">.</span>param<span class="token punctuation">.</span>epoch<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><img src="/thexp/img/query_parallel.png" alt="foo"></blockquote> <p>Plot curve</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>bd<span class="token punctuation">.</span>boards<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>line<span class="token punctuation">(</span><span class="token string">'top1_test_'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><img src="/thexp/img/query_line.png" alt="foo"></blockquote> <h2 id="archive-and-reset"><a href="#archive-and-reset" class="header-anchor">#</a> Archive and reset</h2> <p>You can easily archive and reset the snapshot of any test by <code>thexp</code>.</p> <p>Archive:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> thexp <span class="token keyword">import</span> Q
Q<span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token string">'0020.d94c25ef'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_viewer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>archive<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Reset:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> thexp <span class="token keyword">import</span> Q
Q<span class="token punctuation">.</span>tests<span class="token punctuation">(</span><span class="token string">'0020.d94c25ef'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to_viewer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reset<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">Recoverability</p> <p>Archive and reset operation are also a <code>test</code> in <code>thexp</code>. For archive, it provides the path to store archive file, and for reset, treat it as a <code>test</code> means that you can restore the code by 'reset' the reset test.</p></div> <h2 id="global-config"><a href="#global-config" class="header-anchor">#</a> Global config</h2> <p><code>thexp</code> also provides a global configuration system. Like git, it has three different level, <code>globals</code>, <code>repository</code>, and <code>running</code>.</p> <ul><li><code>globals</code> level will store configurations in <code>$home/.thexp/config.json</code>, <code>thexp</code> will initialize it when first use the package.</li> <li><code>repository</code> level will store values by using git config.</li> <li><code>running</code> is usable only in running time, it just like a global <code>Params</code></li></ul> <h3 id="write"><a href="#write" class="header-anchor">#</a> Write</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> thexp <span class="token keyword">import</span> globs
globs<span class="token punctuation">.</span>add_value<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token string">'something'</span><span class="token punctuation">,</span> globs<span class="token punctuation">.</span>LEVEL<span class="token punctuation">.</span><span class="token builtin">globals</span><span class="token punctuation">)</span>
globs<span class="token punctuation">.</span>add_value<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token string">'something'</span><span class="token punctuation">,</span> globs<span class="token punctuation">.</span>LEVEL<span class="token punctuation">.</span>repository<span class="token punctuation">)</span>
globs<span class="token punctuation">.</span>add_value<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span> <span class="token string">'something'</span><span class="token punctuation">,</span> globs<span class="token punctuation">.</span>LEVEL<span class="token punctuation">.</span>running<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="read"><a href="#read" class="header-anchor">#</a> Read</h3> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> thexp <span class="token keyword">import</span> globs

globs<span class="token punctuation">.</span>get_value<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span>globs<span class="token punctuation">.</span>LEVEL<span class="token punctuation">.</span><span class="token builtin">globals</span><span class="token punctuation">)</span>
globs<span class="token punctuation">.</span>get_value<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span>globs<span class="token punctuation">.</span>LEVEL<span class="token punctuation">.</span>repository<span class="token punctuation">)</span>
globs<span class="token punctuation">.</span>get_value<span class="token punctuation">(</span><span class="token string">'key'</span><span class="token punctuation">,</span>globs<span class="token punctuation">.</span>LEVEL<span class="token punctuation">.</span>running<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>You can read config value from <code>globs</code> like a dict:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>globs<span class="token punctuation">[</span><span class="token string">'key'</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Then the globs will first search the key in running-level, then repository-level, and finally, global-level.</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/12/2020, 4:42:26 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/thexp/bundler/" class="prev">
        Bundle dataloader : DataBundler
      </a></span> <span class="next"><a href="/thexp/trainer/">
        Whole train procedure : Trainer
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/thexp/assets/js/app.4ed6bfcd.js" defer></script><script src="/thexp/assets/js/3.74d8f37c.js" defer></script><script src="/thexp/assets/js/24.55394ed2.js" defer></script>
  </body>
</html>
