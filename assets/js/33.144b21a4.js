(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{398:function(t,s,a){"use strict";a.r(s);var n=a(42),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),a("p",[t._v("之前的几个篇幅介绍了 "),a("code",[t._v("thexp")]),t._v(" 中的主体试验框架，希望您能赞同这是一个十分好用的框架并使用它。")]),t._v(" "),a("p",[t._v("本节将介绍这个实验框架之外的一些内容，这包括本框架其他的一些类与方法，提供的命令行支持，目录结构解释等，您可以以此通过导航定位阅读相关内容。")]),t._v(" "),a("h2",{attrs:{id:"其他常见类和方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他常见类和方法"}},[t._v("#")]),t._v(" 其他常见类和方法")]),t._v(" "),a("p",[a("code",[t._v("thexp")]),t._v(" 提供了许多好用的类、方法，这里只列举非 "),a("code",[t._v("frame")]),t._v(" 模块的一些常用功能")]),t._v(" "),a("h3",{attrs:{id:"base-classes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#base-classes"}},[t._v("#")]),t._v(" base_classes")]),t._v(" "),a("h4",{attrs:{id:"attr"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#attr"}},[t._v("#")]),t._v(" attr")]),t._v(" "),a("p",[t._v("类似 "),a("code",[t._v("EasyDict")]),t._v(" ，但相比于 "),a("code",[t._v("EasyDict")]),t._v(" 添加了更多特性（如json的反序列化）的有序字典类。")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base_classes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" attr\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("blockquote",[a("p",[a("code",[t._v("Params")]),t._v(" 内部使用该类维护相应的超参数字典，此外 Schedule/OptimParam 均继承该类实现相应的方法。")])]),t._v(" "),a("h4",{attrs:{id:"llist"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#llist"}},[t._v("#")]),t._v(" llist")]),t._v(" "),a("p",[t._v("重写了 "),a("code",[t._v("__getitem__")]),t._v(" 方法从而支持任意切片的 list 的子类。")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("base_classes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" llist\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("h3",{attrs:{id:"calculate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#calculate"}},[t._v("#")]),t._v(" calculate")]),t._v(" "),a("p",[t._v("该模块下此处仅介绍 "),a("code",[t._v("Schedule")])]),t._v(" "),a("h4",{attrs:{id:"schedule"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#schedule"}},[t._v("#")]),t._v(" Schedule")]),t._v(" "),a("p",[t._v("Schedule 主要用于动态变化的参数，如学习率调整，损失权重调整。")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("calculate "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" schedule\n\nline_sche "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" schedule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LinearSchedule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("left"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" right"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" start"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" end"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nline_sche"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plot"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("img",{attrs:{src:t.$withBase("/img/sche_plot.png"),alt:"foo"}}),t._v(" "),a("h3",{attrs:{id:"contrib"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#contrib"}},[t._v("#")]),t._v(" contrib")]),t._v(" "),a("h4",{attrs:{id:"paramgrouper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#paramgrouper"}},[t._v("#")]),t._v(" ParamGrouper")]),t._v(" "),a("p",[t._v("这用于 torch 中的 "),a("code",[t._v("Optimizer")]),t._v("，针对不同类别参数构建不同 "),a("code",[t._v("param_group")]),t._v("(Optimzer 中更新参数的最大单位)。")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contrib "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ParamGrouper\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Params\n\nparams "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nparams"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optim "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_optim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'SGD'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.01")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" momentum"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" weight_decay"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5e")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\ngrouper "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ParamGrouper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("modela"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" modelb"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nnoptim "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("copy"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nnoptim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'weight_decay'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\nparam_groups "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    grouper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_param_group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grouper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kernel_params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with_norm"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    grouper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_param_group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grouper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("bias_params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("with_norm"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("False")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("noptim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    grouper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("create_param_group"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("grouper"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("norm_params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("**")]),t._v("noptim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\nsgd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("optim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("build"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("param_groups"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br")])]),a("blockquote",[a("p",[t._v("该需求源于《Bag of Tricks for Image Classification with Convolutional Neural Networks》这篇论文中提出的，只对 "),a("code",[t._v("weight")]),t._v(" 采用权重衰减这一技巧。")])]),t._v(" "),a("h4",{attrs:{id:"ema"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ema"}},[t._v("#")]),t._v(" EMA")]),t._v(" "),a("p",[t._v("EMA（指数移动平均）是一种非常常见的提点方式，其原理就是额外维护一个和原模型一样的模型，并将每次训练后的原模型参数以某权重更新到该模型中。也即是说，模型训练方法还是原来的训练方法，但是在测试的时候用训练的每一步许许多多次模型的加权和来测试。")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("contrib "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" EMA\n\nmodel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用于 train")]),t._v("\nema_model "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" EMA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\noptim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("step"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nema_model"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("step"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 仅用于 eval/test")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h3",{attrs:{id:"utils"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#utils"}},[t._v("#")]),t._v(" utils")]),t._v(" "),a("h4",{attrs:{id:"environ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#environ"}},[t._v("#")]),t._v(" environ")]),t._v(" "),a("p",[t._v("本地还是服务器，是pycharm还是jupyter还是终端，是debug模式还是正常运行模式...确实存在这样的需求，因此"),a("code",[t._v("thexp")]),t._v(" 内置了一些判断变量，以供使用：")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" ENV\n\nENV"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IS_WIN\nENV"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IS_MAC\nENV"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IS_LINUX\nENV"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IS_REMOTE\nENV"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IS_LOCAL\nENV"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IS_PYCHARM\nENV"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("IS_PYCHARM_DEBUG\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("h4",{attrs:{id:"timing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#timing"}},[t._v("#")]),t._v(" timing")]),t._v(" "),a("p",[t._v("一个临时用于计算各方法之间用时的模块")]),t._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" thexp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" timeit\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" time "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" sleep\ntimeit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("start"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("range")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    timeit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mark"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"load"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    sleep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    timeit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mark"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"load2"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    sleep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\ntimeit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("end"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("timeit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("meter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("输出")]),t._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("use: 1.0000 | load: 0.0000 | load2: 1.0000\nuse: 1.0000 | load: 0.4993 | load2: 0.5007\n...\nuse: 1.0000 | load: 0.6419 | load2: 0.3581\nuse: 1.0000 | load: 0.5991 | load2: 0.3343\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("blockquote",[a("p",[t._v("内部计算有一定的用时，因此比较适用于耗时较长的代码（也就是深度学习过程中），是开发过程中保留的一个比较鸡肋的功能。（正式项目开发有 "),a("code",[t._v("cProfile")]),t._v(" 等工具，根本用不上这个）")])]),t._v(" "),a("h2",{attrs:{id:"命令行支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令行支持"}},[t._v("#")]),t._v(" 命令行支持")]),t._v(" "),a("p",[a("code",[t._v("thexp")]),t._v(" 对一些常用命令提供了额外的命令行支持。")]),t._v(" "),a("h3",{attrs:{id:"reset-archive-delete"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reset-archive-delete"}},[t._v("#")]),t._v(" reset/archive/delete")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重置代码到某次试验时的代码")]),t._v("\nthexp reset "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nthexp reset --test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nthexp reset --test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打包某次试验时的代码")]),t._v("\nthexp archive "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nthexp archive --test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nthexp archive --test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直接删除某实验（一般为结束后删除某失败无价值的试验）")]),t._v("\nthexp delete "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nthexp delete --test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nthexp delete --test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br")])]),a("h3",{attrs:{id:"tensorboard"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tensorboard"}},[t._v("#")]),t._v(" Tensorboard")]),t._v(" "),a("p",[t._v("Tensorboard有时启动会存在临时目录的问题，此外每次都需要定位目录，"),a("code",[t._v("thexp")]),t._v(" 额外提供了基于 "),a("code",[t._v("testname")]),t._v(" 的定位方式，除此之外，其余参数均和原 "),a("code",[t._v("tensorboard")]),t._v(" 命令的参数相同（由于参数解析的问题，该方式不能输入单横杠参数）：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("thexp board "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--logdir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("logdir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nthexp board "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("--test"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("test_name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# find test_name and tensorboard it ")]),t._v("\nthexp board  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# default open ./board")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h3",{attrs:{id:"深度学习试验模板生成"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#深度学习试验模板生成"}},[t._v("#")]),t._v(" 深度学习试验模板生成")]),t._v(" "),a("p",[t._v("效果约等于 "),a("code",[t._v("git init")]),t._v(" ，但是会在相同目录下生成额外的诸多 "),a("code",[t._v("py")]),t._v(" 文件。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("thexp init\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("该模板通过合理的组织形式，能够在不断的补充和重改试验中保持住项目整体的代码复杂度，清爽简洁，适用于较长实验周期的项目代码。")]),t._v(" "),a("blockquote",[a("p",[t._v("对模板内具体内容的介绍请参考 "),a("a",{attrs:{href:"/thexp/structure"}},[t._v("Cookbook-Structure")])])]),t._v(" "),a("h2",{attrs:{id:"目录组织"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录组织"}},[t._v("#")]),t._v(" 目录组织")]),t._v(" "),a("p",[a("code",[t._v("thexp")]),t._v(" 的各模块按照如下的方式进行区分：")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("analyse")]),t._v(" : 用于对基于 "),a("code",[t._v("Experiment")]),t._v(" 完成的试验进行分析和可视化")]),t._v(" "),a("li",[a("code",[t._v("base_classes")]),t._v(" : 提供了很多基类和数据结构")]),t._v(" "),a("li",[a("code",[t._v("contrib")]),t._v(" : 对"),a("code",[t._v("pytorch")]),t._v("中许多功能的一些扩展和补充")]),t._v(" "),a("li",[a("code",[t._v("calculate")]),t._v(" : 用于对向量、存储空间和数值等计算的方法或类")]),t._v(" "),a("li",[a("code",[t._v("decorators")]),t._v(" : 各种用途的装饰器")]),t._v(" "),a("li",[a("code",[t._v("frame")]),t._v(" : 所有介绍的框架相关功能均位于该模块内")]),t._v(" "),a("li",[a("code",[t._v("future")]),t._v(" : 以后打算添加但由于各种原因还没有真正添加进去的功能，bug")]),t._v(" "),a("li",[a("code",[t._v("nest")]),t._v(" : 对 "),a("code",[t._v("thexp")]),t._v(" 中框架功能的一些扩展和补充（mixin）")]),t._v(" "),a("li",[a("code",[t._v("util")]),t._v(" : 一些基本的功能库")])])])}),[],!1,null,null,null);s.default=e.exports}}]);